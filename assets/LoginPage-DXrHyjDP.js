import{r as s,u as L,j as e}from"./index-D7BPkl7L.js";import{a as C}from"./index-xsH4HHeE.js";const A="/forum_asisten/assets/logoFA-D-PCb8Na.png";function B(){const[i,b]=s.useState(""),[d,j]=s.useState(""),[r,v]=s.useState(!1),[o,c]=s.useState(!1),[N,l]=s.useState(!1),[y,m]=s.useState(""),[k,u]=s.useState(""),[x,g]=s.useState(!1),h=L(),M=async t=>{var p,w;t.preventDefault(),c(!0);try{const n=await C.post("http://localhost:8080/api/login",{identifier:i,password:d}),{token:S,user:a}=n.data;localStorage.setItem("token",S),localStorage.setItem("user",JSON.stringify(a)),m("Login Berhasil"),u(`Selamat datang, ${a.name||a.nim||"Pengguna"}!`),g(!0),l(!0),setTimeout(()=>{a.role==="admin"?h("/admin/home"):h("/home")},1500)}catch(n){m("Login Gagal"),u(((w=(p=n.response)==null?void 0:p.data)==null?void 0:w.message)||"Silakan cek email/NIM dan password Anda."),g(!1),l(!0)}finally{c(!1)}},f=()=>{l(!1)};return e.jsxs("div",{className:"w-screen h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4 relative",children:[N&&e.jsx("div",{className:"fixed inset-0 drop-shadow-2xl bg-opacity-30 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-sm w-full mx-4 shadow-xl",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h3",{className:`text-xl font-bold ${x?"text-green-600":"text-red-600"}`,children:y}),e.jsx("button",{onClick:f,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("p",{className:"text-gray-700 mb-6",children:k}),e.jsx("button",{onClick:f,className:`w-full py-2 rounded-lg font-medium text-white ${x?"bg-green-500 hover:bg-green-600":"bg-red-500 hover:bg-red-600"} transition duration-200`,children:"OK"})]})}),e.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-xl overflow-hidden transition-all duration-300 hover:shadow-2xl",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 text-center",children:e.jsx("img",{src:A,alt:"logo",className:"mx-auto w-20 h-20 object-contain drop-shadow-md bg-white rounded-full p-1"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Selamat Datang"}),e.jsx("p",{className:"text-base text-gray-700 mt-2",children:"Masuk untuk mengakses akun Anda"})]}),e.jsxs("form",{onSubmit:M,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"identifier",className:"block text-sm font-medium text-gray-800 mb-1",children:"Email/NIM"}),e.jsx("input",{id:"identifier",type:"text",placeholder:"Email atau NIM",value:i,onChange:t=>b(t.target.value),required:!0,className:"w-full px-4 py-3 border text-gray-900 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-800 mb-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",type:r?"text":"password",placeholder:"••••••••",value:d,onChange:t=>j(t.target.value),required:!0,className:"w-full px-4 py-3 border text-gray-900 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none pr-12"}),e.jsx("button",{type:"button",onClick:()=>v(!r),className:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-500 hover:text-gray-700",children:r?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"flex items-center text-sm text-gray-700"}),e.jsx("a",{className:"text-sm text-gray-600 hover:underline",children:"Lupa password? Koordinasikan dengan Administrator"})]}),e.jsx("button",{type:"submit",disabled:o,className:`w-full py-3 rounded-lg font-medium text-white transition duration-200 ${o?"bg-blue-400 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-indigo-700 hover:from-blue-700 hover:to-indigo-800 active:scale-95"}`,children:o?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin mr-2 h-5 w-5 text-white",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),"Memproses..."]}):"Masuk"})]}),e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-600",children:["Belum punya akun?"," ",e.jsx("a",{href:"/register",className:"font-medium text-blue-600 hover:underline",children:"Daftar sekarang"})]})]})]}),e.jsxs("div",{className:"mt-6 text-center text-xs text-gray-500 absolute bottom-4",children:["© ",new Date().getFullYear()," Forum Asisten. All rights reserved."]})]})}export{B as default};
