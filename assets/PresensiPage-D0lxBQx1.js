import{r as l,u as $e,j as e}from"./index-D7BPkl7L.js";import{a as q}from"./index-xsH4HHeE.js";import{L as G}from"./Layout-CvxaU38W.js";import{g as Ke,m as j,w as Re,x as qe,y as T,F as Ge,n as Se}from"./proxy-CFRt1oNv.js";function Ye(){var ie,ne,oe,de,ce,me,ue,xe,he,ge,be,je,pe,fe,we,Ne,ye;const[p,O]=l.useState(null),[Ce,V]=l.useState(!0),[f,Me]=l.useState(null),[_e,D]=l.useState("aktif"),[W,P]=l.useState(null),I=$e(),[o,X]=l.useState("hadir"),[N,C]=l.useState(null),[y,M]=l.useState(null),[E,H]=l.useState(""),[Oe,Q]=l.useState(!1),[J,B]=l.useState(!1),[U,Y]=l.useState(!1),[Z,ee]=l.useState(!1),[ze,Pe]=l.useState([]),[u,$]=l.useState(null),[K,ae]=l.useState(""),[se,Ue]=l.useState("utama"),[Le,R]=l.useState(!1),[Ae,Fe]=l.useState(""),[Te,k]=l.useState(!1),[De,L]=l.useState(""),[_,z]=l.useState(0),Ie=()=>e.jsx("div",{className:"fixed inset-0 drop-shadow-2xl bg-opacity-30 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs(j.div,{className:"bg-white p-6 rounded-xl max-w-md w-full mx-4",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-xl font-semibold text-green-600 flex items-center gap-2",children:[e.jsx(Ge,{className:"text-2xl"}),"Berhasil"]}),e.jsx("button",{onClick:()=>R(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(Se,{className:"text-xl"})})]}),e.jsx("p",{className:"text-gray-700 mb-4",children:Ae}),e.jsx("button",{onClick:()=>R(!1),className:"w-full py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition",children:"Tutup"})]})}),Ee=()=>e.jsx("div",{className:"fixed inset-0 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs(j.div,{className:"bg-white p-6 rounded-xl max-w-md w-full mx-4",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-red-600",children:"Error"}),e.jsx("button",{onClick:()=>k(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(Se,{className:"text-xl"})})]}),e.jsx("p",{className:"text-gray-700 mb-4",children:De}),e.jsx("button",{onClick:()=>k(!1),className:"w-full py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition",children:"Tutup"})]})});l.useEffect(()=>{(async()=>{try{const t=localStorage.getItem("token");if(t){const i=JSON.parse(atob(t.split(".")[1])),d={user_id:i.user_id,...i};if(Me(d),i.status)D(i.status);else{const n=localStorage.getItem("user");if(n){const s=JSON.parse(n);s.status&&D(s.status)}}}else L("Anda harus login terlebih dahulu"),k(!0),setTimeout(()=>I("/login"),2e3)}catch(t){console.error("Token parsing error:",t),L("Sesi login telah habis, silahkan login kembali"),k(!0),setTimeout(()=>I("/login"),2e3),D("aktif")}})()},[I]);const He=a=>{var b,v,S;const t=new Date,i=t.toLocaleDateString("id-ID",{weekday:"long"}),d=((b=a.jadwal)==null?void 0:b.hari)||a.hari,n=((v=a.jadwal)==null?void 0:v.jam_mulai)||a.jam_mulai,s=((S=a.jadwal)==null?void 0:S.jam_selesai)||a.jam_selesai,[r,m]=n.split(":").map(Number),[x,h]=s.split(":").map(Number),w=r*60+m,g=x*60+h,c=t.getHours()*60+t.getMinutes();return d.toLowerCase()!==i.toLowerCase()?!1:c>=w-30&&c<=g+30},te=async a=>{var i,d,n;if(!a)throw new Error("No file provided");if(!a.type.match("image.*"))throw new Error("Hanya file gambar yang diperbolehkan");if(a.size>10*1024*1024)throw new Error("Ukuran file terlalu besar (maksimal 10MB)");const t=new FormData;t.append("file",a),t.append("upload_preset","forum_asisten"),t.append("api_key","455624144262999");try{const s=await q.post("https://api.cloudinary.com/v1_1/azzerith/upload",t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:r=>{const m=Math.round(r.loaded*100/r.total);z(m),console.log(`Upload progress: ${m}%`)}});if(!s.data.secure_url)throw new Error("No URL returned from Cloudinary");return s.data.secure_url}catch(s){throw console.error("Cloudinary upload error:",s),new Error(((n=(d=(i=s.response)==null?void 0:i.data)==null?void 0:d.error)==null?void 0:n.message)||s.message||"Gagal mengupload gambar")}finally{z(0)}},le=async(a=!1)=>{var i,d,n;const t=a?u:p;if(t){Y(!0),P(null),z(0);try{if(o==="hadir"&&!N)throw new Error("Bukti kehadiran diperlukan");if(o==="izin"&&!y)throw new Error("Bukti izin diperlukan");let s=null,r=null;o==="hadir"?s=await te(N):o==="izin"&&(r=await te(y)),z(-1);const m={jadwal_id:((i=t.jadwal)==null?void 0:i.id)||t.id,jenis:se,status:o,...o==="hadir"&&{bukti_kehadiran:s,isi_materi:E},...o==="izin"&&{bukti_izin:r}},x=await q.post("http://localhost:8080/api/presensi",m,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});console.log("Presensi berhasil:",x.data),Fe("Presensi berhasil dikirim!"),R(!0),B(!1),ee(!1),C(null),M(null),H(""),$(null)}catch(s){console.error("Gagal submit presensi:",s);const r=((n=(d=s.response)==null?void 0:d.data)==null?void 0:n.error)||s.message||"Gagal submit presensi";L(r),k(!0),P(r)}finally{Y(!1),z(0)}}};l.useEffect(()=>{if(!(f!=null&&f.user_id))return;(async()=>{var t,i,d,n;try{V(!0),P(null);const s=await q.get("http://localhost:8080/api/asisten-kelas",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),r=Array.isArray(s.data)?s.data:[s.data];Pe(r);const m=r.filter(c=>{var b;return c.asisten_id===Number(f.user_id)||((b=c.asisten)==null?void 0:b.id)===Number(f.user_id)}),x=new Date,h=x.getHours()*60+x.getMinutes(),w=m.filter(c=>He(c)).sort((c,b)=>{var A,F;const v=((A=c.jadwal)==null?void 0:A.jam_mulai)||c.jam_mulai,S=((F=b.jadwal)==null?void 0:F.jam_mulai)||b.jam_mulai;return v.localeCompare(S)});let g=null;for(const c of w){const b=((t=c.jadwal)==null?void 0:t.jam_mulai)||c.jam_mulai,v=((i=c.jadwal)==null?void 0:i.jam_selesai)||c.jam_selesai,[S,A]=b.split(":").map(Number),[F,Be]=v.split(":").map(Number),ke=S*60+A,ve=F*60+Be;if(h>=ke-30&&h<=ve+30&&(g=c,h>=ke&&h<=ve))break}g?(O(g),Q(!0)):(O(null),Q(!1))}catch(s){console.error("Gagal mengambil data jadwal",s);const r=((n=(d=s.response)==null?void 0:d.data)==null?void 0:n.error)||s.message||"Gagal mengambil data";L(r),k(!0),P(r)}finally{V(!1)}})()},[f==null?void 0:f.user_id]);const re=ze.filter(a=>{var s,r,m,x,h,w,g;const t=K.toLowerCase(),i=((r=(s=a.jadwal)==null?void 0:s.mata_kuliah)==null?void 0:r.nama)||((m=a.mata_kuliah)==null?void 0:m.nama)||"",d=((x=a.jadwal)==null?void 0:x.kelas)||a.kelas||"",n=((w=(h=a.jadwal)==null?void 0:h.dosen)==null?void 0:w.nama)||((g=a.dosen)==null?void 0:g.nama)||"";return i.toLowerCase().includes(t)||d.toLowerCase().includes(t)||n.toLowerCase().includes(t)});if(Ce)return e.jsx(G,{children:e.jsx("main",{className:"flex-1 p-6 flex justify-center items-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Memuat data presensi..."})]})})});if(_e==="non-aktif")return e.jsx(G,{children:e.jsx("main",{className:"flex-1 p-6",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden border border-red-200",children:e.jsx("div",{className:"p-6 md:p-8",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center mb-4",children:e.jsx(Ke,{className:"text-red-500 text-2xl"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Status Akun Non-Aktif"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Akun Anda saat ini berstatus non-aktif. Anda tidak dapat melakukan aksi pada halaman ini. Silakan hubungi administrator untuk mengaktifkan akun Anda."}),e.jsx("div",{className:"w-full bg-gray-50 p-4 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm font-medium",children:"Status: Non-Aktif"}),e.jsxs("span",{className:"text-gray-600 text-sm",children:["Nama: ",f.nama]})]})})]})})})})})});const Je=({progress:a,message:t})=>e.jsx("div",{className:"fixed inset-0 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4 text-gray-800",children:a===100?"Mengirim Data...":"Mengupload Data..."}),e.jsx("p",{className:"text-gray-600 mb-4",children:t}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mb-4",children:e.jsx("div",{className:`h-2.5 rounded-full ${a===100?"bg-green-500":"bg-blue-600"}`,style:{width:`${a}%`}})}),e.jsx("p",{className:"text-center text-gray-600",children:a===100?"Mengirim...":`${a}% selesai`})]})});return e.jsxs(G,{children:[Le&&e.jsx(Ie,{}),Te&&e.jsx(Ee,{}),(_>0||_===-1)&&e.jsx(Je,{progress:_===-1?100:_,message:_===-1?"Mengirim data presensi ke server...":"Mengupload bukti presensi..."}),e.jsxs("main",{className:"flex-1 p-6",children:[e.jsxs(j.button,{onClick:()=>{ee(!Z),B(!1)},className:"mb-6 flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-lg shadow hover:bg-green-700 transition-all cursor-pointer",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(Re,{}),"Presensi Lain"]}),Z&&e.jsxs(j.div,{className:"bg-white p-6 rounded-xl shadow mb-6",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Presensi Lain"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-medium mb-2 text-gray-700",children:"Cari Jadwal"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Cari berdasarkan mata kuliah, kelas, atau dosen...",className:"text-black w-full border border-gray-300 px-4 py-2 rounded-lg pl-10 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",value:K,onChange:a=>ae(a.target.value)}),e.jsx(qe,{className:"absolute left-3 top-3 text-gray-400"})]})]}),K&&e.jsx("div",{className:"text-gray-600 mb-4 max-h-60 overflow-y-auto border border-gray-200 rounded-lg",children:re.length>0?re.map(a=>{var t,i,d,n,s,r,m,x,h,w,g;return e.jsxs("div",{onClick:()=>{$(a),ae("")},className:`p-3 hover:bg-blue-50 cursor-pointer ${((t=u==null?void 0:u.jadwal)==null?void 0:t.id)===((i=a.jadwal)==null?void 0:i.id)?"bg-blue-100":""}`,children:[e.jsxs("div",{className:"font-medium",children:[(n=(d=a.jadwal)==null?void 0:d.mata_kuliah)==null?void 0:n.nama," - ",(s=a.jadwal)==null?void 0:s.kelas]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[(r=a.jadwal)==null?void 0:r.hari,", ",(m=a.jadwal)==null?void 0:m.jam_mulai," - ",(x=a.jadwal)==null?void 0:x.jam_selesai]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Dosen: ",(w=(h=a.jadwal)==null?void 0:h.dosen)==null?void 0:w.nama]})]},((g=a.jadwal)==null?void 0:g.id)||a.id)}):e.jsx("div",{className:"p-3 text-gray-500",children:"Tidak ditemukan jadwal"})}),u&&e.jsxs("div",{className:"text-white mb-4 bg-blue-600 p-4 rounded-lg",children:[e.jsxs("h3",{className:"font-medium mb-1",children:[(ne=(ie=u.jadwal)==null?void 0:ie.mata_kuliah)==null?void 0:ne.nama," - ",(oe=u.jadwal)==null?void 0:oe.kelas]}),e.jsxs("p",{className:"text-sm text-white mb-1",children:[(de=u.jadwal)==null?void 0:de.hari,", ",(ce=u.jadwal)==null?void 0:ce.jam_mulai," - ",(me=u.jadwal)==null?void 0:me.jam_selesai]}),e.jsxs("p",{className:"text-sm text-white",children:["Dosen: ",(xe=(ue=u.jadwal)==null?void 0:ue.dosen)==null?void 0:xe.nama]}),e.jsx(j.button,{onClick:()=>$(null),className:"cursor-pointer inline-flex items-center px-4 py-2 mt-2 bg-red-600 text-white rounded-lg shadow hover:bg-red-700 transition-all",children:"Batalkan pilihan"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-medium mb-2 text-gray-700",children:"Jenis Presensi"}),e.jsxs("select",{value:se,onChange:a=>Ue(a.target.value),className:"text-black w-full border border-gray-300 px-4 py-2 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",children:[e.jsx("option",{value:"utama",children:"Utama"}),e.jsx("option",{value:"pengganti",children:"Pengganti"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-medium mb-2 text-gray-700",children:"Status"}),e.jsxs("select",{value:o,onChange:a=>X(a.target.value),className:"text-black w-full border border-gray-300 px-4 py-2 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",children:[e.jsx("option",{value:"hadir",children:"Hadir"}),e.jsx("option",{value:"izin",children:"Izin"})]})]}),o==="hadir"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-medium mb-2 text-gray-700",children:"Upload Bukti Kehadiran (Foto tanggal di komputer dosen)"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"cursor-pointer inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-700 to-indigo-700 text-white rounded-lg shadow hover:bg-blue-700 transition-all",children:[e.jsx(T,{className:"mr-2"}),"Pilih File",e.jsx("input",{type:"file",accept:"image/*",onChange:a=>C(a.target.files[0]),className:"hidden",required:!0})]}),N&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:URL.createObjectURL(N),alt:"Preview Kehadiran",className:"w-20 h-20 object-cover rounded border"}),e.jsx("button",{onClick:()=>C(null),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:"×"})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-medium mb-2 text-gray-700",children:"Isi Materi"}),e.jsx("textarea",{value:E,onChange:a=>H(a.target.value),className:"text-black w-full border border-gray-300 px-4 py-2 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",rows:"4",placeholder:"Masukkan materi yang diajarkan...",required:!0})]})]}),o==="izin"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-medium mb-2 text-gray-700",children:"Upload Bukti Izin"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"cursor-pointer inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-lg shadow hover:bg-red-700 transition-all",children:[e.jsx(T,{className:"mr-2"}),"Pilih File",e.jsx("input",{type:"file",accept:"image/*",onChange:a=>M(a.target.files[0]),className:"hidden",required:!0})]}),y&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:URL.createObjectURL(y),alt:"Preview Izin",className:"w-20 h-20 object-cover rounded border"}),e.jsx("button",{onClick:()=>M(null),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:"×"})]})]})]}),e.jsx(j.button,{onClick:()=>le(!0),disabled:U||!u,className:`w-full py-3 px-4 rounded-lg text-white font-medium text-lg ${o==="izin"?"bg-gradient-to-r from-red-600 to-red-700":"bg-gradient-to-r from-green-600 to-green-700"} shadow-md disabled:opacity-70`,whileHover:{scale:1.02},whileTap:{scale:.98},children:U?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Memproses..."]}):o==="izin"?"Ajukan Izin":"Submit Presensi Lain"})]}),p?e.jsxs(j.div,{onClick:()=>B(!J),className:"cursor-pointer bg-gradient-to-r from-blue-600 to-indigo-700 text-white rounded-xl p-6 mb-6 shadow-lg hover:scale-[1.01] transition-transform",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.3},children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("span",{className:"text-3xl",children:"⏰"}),e.jsxs("h2",{className:"text-xl font-semibold",children:[(ge=(he=p.jadwal)==null?void 0:he.mata_kuliah)==null?void 0:ge.nama," - ",(be=p.jadwal)==null?void 0:be.kelas]})]}),e.jsxs("p",{className:"text-sm opacity-90 mb-1",children:["Dosen: ",(pe=(je=p.jadwal)==null?void 0:je.dosen)==null?void 0:pe.nama]}),e.jsxs("p",{className:"text-sm opacity-90",children:["Jadwal: ",(fe=p.jadwal)==null?void 0:fe.hari,", ",(we=p.jadwal)==null?void 0:we.jam_mulai," - ",(Ne=p.jadwal)==null?void 0:Ne.jam_selesai,", ",(ye=p.jadwal)==null?void 0:ye.lab]}),e.jsx("div",{className:"mt-3 text-sm",children:J?"▲ Tutup form presensi":"▼ Klik untuk presensi"})]}):e.jsxs(j.div,{className:"bg-white rounded-xl shadow-lg p-8 text-center max-w-md mb-6",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("div",{className:"text-6xl mb-4",children:"📭"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"Tidak Ada Jadwal Hari Ini"}),e.jsx("p",{className:"text-gray-600 mb-4",children:'Kamu tidak memiliki jadwal mengajar pada hari dan jam ini. Gunakan tombol "Presensi Lain" di atas jika ingin melakukan presensi di luar jadwal.'}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-2 px-4 py-2 bg-gradient-to-r from-blue-700 to-indigo-700 text-white rounded-lg shadow hover:bg-blue-700 transition-all cursor-pointer",children:"Muat Ulang"})]}),J&&e.jsxs(j.div,{className:"bg-white p-6 rounded-xl shadow mb-6",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:[W&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:W}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-medium mb-2 text-gray-700",children:"Status"}),e.jsxs("select",{value:o,onChange:a=>X(a.target.value),className:"text-black w-full border border-gray-300 px-4 py-2 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",children:[e.jsx("option",{value:"hadir",children:"Hadir"}),e.jsx("option",{value:"izin",children:"Izin"})]})]}),o==="hadir"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-medium mb-2 text-gray-700",children:"Upload Bukti Kehadiran (Foto tanggal di komputer dosen)"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"cursor-pointer inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-700 to-indigo-700 text-white rounded-lg shadow hover:bg-blue-700 transition-all",children:[e.jsx(T,{className:"mr-2"}),"Pilih File",e.jsx("input",{type:"file",accept:"image/*",onChange:a=>C(a.target.files[0]),className:"hidden",required:!0})]}),N&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:URL.createObjectURL(N),alt:"Preview Kehadiran",className:"w-20 h-20 object-cover rounded border"}),e.jsx("button",{onClick:()=>C(null),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:"×"})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-medium mb-2 text-gray-700",children:"Isi Materi"}),e.jsx("textarea",{value:E,onChange:a=>H(a.target.value),className:"text-black w-full border border-gray-300 px-4 py-2 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",rows:"4",placeholder:"Masukkan materi yang diajarkan...",required:!0})]})]}),o==="izin"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-medium mb-2 text-gray-700",children:"Upload Bukti Izin"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"cursor-pointer inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-lg shadow hover:bg-red-700 transition-all",children:[e.jsx(T,{className:"mr-2"}),"Pilih File",e.jsx("input",{type:"file",accept:"image/*",onChange:a=>M(a.target.files[0]),className:"hidden",required:!0})]}),y&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:URL.createObjectURL(y),alt:"Preview Izin",className:"w-20 h-20 object-cover rounded border"}),e.jsx("button",{onClick:()=>M(null),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:"×"})]})]})]}),e.jsx(j.button,{onClick:()=>le(!1),disabled:U,className:`w-full py-3 px-4 rounded-lg text-white font-medium text-lg ${o==="izin"?"bg-gradient-to-r from-red-600 to-red-700":"bg-gradient-to-r from-green-600 to-green-700"} shadow-md disabled:opacity-70`,whileHover:{scale:1.02},whileTap:{scale:.98},children:U?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Memproses..."]}):o==="izin"?"Ajukan Izin":"Submit Presensi"})]})]})]})}export{Ye as default};
