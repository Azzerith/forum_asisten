import{r as i,j as e,a as F,L as w}from"./index-D7BPkl7L.js";import{M as B,G as q,H as I,P as V,I as G,J as X,L as _,m as y,K as R,n as A,N as D,O as $,l as Y,a as J,r as M,s as O,F as S,j as W}from"./proxy-CFRt1oNv.js";class Q extends i.Component{getSnapshotBeforeUpdate(a){const t=this.props.childRef.current;if(t&&a.isPresent&&!this.props.isPresent){const l=t.offsetParent,m=q(l)&&l.offsetWidth||0,d=this.props.sizeRef.current;d.height=t.offsetHeight||0,d.width=t.offsetWidth||0,d.top=t.offsetTop,d.left=t.offsetLeft,d.right=m-d.width-d.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Z({children:r,isPresent:a,anchorX:t}){const l=i.useId(),m=i.useRef(null),d=i.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:p}=i.useContext(B);return i.useInsertionEffect(()=>{const{width:h,height:n,top:s,left:c,right:o}=d.current;if(a||!m.current||!h||!n)return;const f=t==="left"?`left: ${c}`:`right: ${o}`;m.current.dataset.motionPopId=l;const u=document.createElement("style");return p&&(u.nonce=p),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${n}px !important;
            ${f}px !important;
            top: ${s}px !important;
          }
        `),()=>{document.head.contains(u)&&document.head.removeChild(u)}},[a]),e.jsx(Q,{isPresent:a,childRef:m,sizeRef:d,children:i.cloneElement(r,{ref:m})})}const ee=({children:r,initial:a,isPresent:t,onExitComplete:l,custom:m,presenceAffectsLayout:d,mode:p,anchorX:h})=>{const n=I(te),s=i.useId();let c=!0,o=i.useMemo(()=>(c=!1,{id:s,initial:a,isPresent:t,custom:m,onExitComplete:f=>{n.set(f,!0);for(const u of n.values())if(!u)return;l&&l()},register:f=>(n.set(f,!1),()=>n.delete(f))}),[t,n,l]);return d&&c&&(o={...o}),i.useMemo(()=>{n.forEach((f,u)=>n.set(u,!1))},[t]),i.useEffect(()=>{!t&&!n.size&&l&&l()},[t]),p==="popLayout"&&(r=e.jsx(Z,{isPresent:t,anchorX:h,children:r})),e.jsx(V.Provider,{value:o,children:r})};function te(){return new Map}const v=r=>r.key||"";function z(r){const a=[];return i.Children.forEach(r,t=>{i.isValidElement(t)&&a.push(t)}),a}const P=({children:r,custom:a,initial:t=!0,onExitComplete:l,presenceAffectsLayout:m=!0,mode:d="sync",propagate:p=!1,anchorX:h="left"})=>{const[n,s]=G(p),c=i.useMemo(()=>z(r),[r]),o=p&&!n?[]:c.map(v),f=i.useRef(!0),u=i.useRef(c),N=I(()=>new Map),[K,T]=i.useState(c),[j,U]=i.useState(c);X(()=>{f.current=!1,u.current=c;for(let g=0;g<j.length;g++){const x=v(j[g]);o.includes(x)?N.delete(x):N.get(x)!==!0&&N.set(x,!1)}},[j,o.length,o.join("-")]);const k=[];if(c!==K){let g=[...c];for(let x=0;x<j.length;x++){const b=j[x],E=v(b);o.includes(E)||(g.splice(x,0,b),k.push(b))}return d==="wait"&&k.length&&(g=k),U(z(g)),T(c),null}const{forceRender:C}=i.useContext(_);return e.jsx(e.Fragment,{children:j.map(g=>{const x=v(g),b=p&&!n?!1:c===j||o.includes(x),E=()=>{if(N.has(x))N.set(x,!0);else return;let L=!0;N.forEach(H=>{H||(L=!1)}),L&&(C==null||C(),U(u.current),p&&(s==null||s()),l&&l())};return e.jsx(ee,{isPresent:b,initial:!f.current||t?void 0:!1,custom:a,presenceAffectsLayout:m,mode:d,onExitComplete:b?void 0:E,anchorX:h,children:g},x)})})};function ae({isOpen:r,setIsOpen:a}){var h;const[t,l]=i.useState({}),m=F();i.useEffect(()=>{const n=localStorage.getItem("token");if(n){const s=JSON.parse(atob(n.split(".")[1]));l(s)}},[]);const d={open:{x:0},closed:{x:"-100%"}},p=[{path:"/admin/home",name:"Dashboard",icon:e.jsx($,{className:"h-5 w-5"})},{path:"/admin/data-user",name:"Data User",icon:e.jsx(Y,{className:"h-5 w-5"})},{path:"/admin/data-dosen",name:"Data Dosen",icon:e.jsx(J,{className:"h-5 w-5"})},{path:"/admin/data-prodi",name:"Data Prodi",icon:e.jsx(M,{className:"h-5 w-5"})},{path:"/admin/data-matkul",name:"Data Mata Kuliah",icon:e.jsx(M,{className:"h-5 w-5"})},{path:"/admin/data-jadwal",name:"Data Jadwal",icon:e.jsx(O,{className:"h-5 w-5"})},{path:"/admin/data-plotingan",name:"Data Plotingan",icon:e.jsx(S,{className:"h-5 w-5"})},{path:"/admin/data-presensi",name:"Data Presensi",icon:e.jsx(S,{className:"h-5 w-5"})},{path:"/admin/data-rekapitulasi",name:"Data Rekapitulasi",icon:e.jsx(W,{className:"h-5 w-5"})}];return e.jsxs(e.Fragment,{children:[e.jsx(P,{children:!r&&e.jsx(y.button,{className:"fixed top-6 left-6 z-30 cursor-pointer md:hidden",onClick:()=>a(!0),initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:e.jsx(R,{className:"h-8 w-8 text-blue-600 hover:text-blue-800"})})}),e.jsx(P,{children:r&&e.jsxs(e.Fragment,{children:[e.jsx(y.div,{className:"fixed inset-0  bg-opacity-30 z-40 md:hidden",onClick:()=>a(!1),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2}}),e.jsxs(y.aside,{className:"w-64 bg-gradient-to-b from-blue-700 to-indigo-900 text-white p-4 flex flex-col justify-between h-screen fixed md:static z-50 shadow-xl",initial:"closed",animate:"open",exit:"closed",variants:d,transition:{type:"spring",stiffness:300,damping:30},children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8 pt-4",children:[e.jsxs("div",{className:"text-2xl font-bold flex items-center gap-2 text-white",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Admin Panel"]}),e.jsx("button",{className:"md:hidden text-white hover:text-gray-200",onClick:()=>a(!1),"aria-label":"Close sidebar",children:e.jsx(A,{className:"h-6 w-6"})})]}),e.jsx("nav",{className:"space-y-2",children:p.map(n=>e.jsxs(w,{to:n.path,className:`flex items-center gap-3 p-3 rounded-lg transition-all ${m.pathname===n.path?"bg-indigo-600 font-medium":"hover:bg-indigo-700"}`,onClick:()=>window.innerWidth<768&&a(!1),children:[n.icon,e.jsx("span",{children:n.name})]},n.path))})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs(w,{to:"/",className:"flex items-center gap-3 p-3 text-white hover:bg-red-700 rounded-lg transition-all",children:[e.jsx(D,{className:"h-5 w-5"}),e.jsx("span",{children:"Logout"})]}),e.jsxs(w,{to:"/admin/home",className:`flex items-center gap-3 mt-4 p-3 rounded-lg transition-all ${m.pathname==="/admin/home"?"bg-white/20 font-medium":"bg-white/10 hover:bg-white/20"}`,children:[e.jsx("div",{className:"w-10 h-10 bg-white text-blue-900 font-bold rounded-full flex items-center justify-center uppercase shadow-md",children:((h=t.nama)==null?void 0:h[0])||"A"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold",children:t.nama||"Admin"}),e.jsx("p",{className:"text-xs opacity-80",children:"Administrator"})]})]})]})]})]})})]})}const se="/forum_asisten/assets/logo-FA-DqefobY4.png";function ne({isOpen:r,setIsOpen:a}){var h,n;const[t,l]=i.useState({}),m=F();i.useEffect(()=>{const s=localStorage.getItem("token"),c=localStorage.getItem("user");if(c)try{const o=JSON.parse(c);l({nama:o.nama||"User",nim:o.nim||"NIM",photo:o.photo||null,role:o.role||"asisten"})}catch(o){if(console.error("Error parsing user data:",o),s)try{const f=JSON.parse(atob(s.split(".")[1]));l({nama:f.nama||"User",nim:f.nim||"NIM",photo:f.photo||null,role:f.role||"asisten"})}catch(f){console.error("Error parsing token:",f)}}else if(s)try{const o=JSON.parse(atob(s.split(".")[1]));l({nama:o.nama||"User",nim:o.nim||"NIM",photo:o.photo||null,role:o.role||"asisten"})}catch(o){console.error("Error parsing token:",o)}},[]);const d={open:{x:0},closed:{x:"-100%"}},p=[{path:"/home",name:"Home",icon:e.jsx($,{className:"h-5 w-5"})},{path:"/mata-kuliah",name:"Mata Kuliah",icon:e.jsx(M,{className:"h-5 w-5"})},{path:"/presensi",name:"Presensi",icon:e.jsx(S,{className:"h-5 w-5"})},{path:"/rekapitulasi",name:"Rekapitulasi",icon:e.jsx(W,{className:"h-5 w-5"})},{path:"/jadwal",name:"Jadwal Asisten",icon:e.jsx(O,{className:"h-5 w-5"})}];return e.jsx(e.Fragment,{children:e.jsx(P,{children:r&&e.jsxs(e.Fragment,{children:[e.jsx(y.div,{className:"fixed inset-0 bg-opacity-50 z-40 md:hidden",onClick:()=>a(!1),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2}}),e.jsxs(y.aside,{className:"w-64 bg-gradient-to-b from-blue-700 to-indigo-900 text-white p-4 flex flex-col justify-between h-screen fixed md:static z-50 shadow-xl",initial:"closed",animate:"open",exit:"closed",variants:d,transition:{type:"spring",stiffness:300,damping:30},children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8 pt-4",children:[e.jsx("img",{src:se,alt:"logo",className:"mx-auto w-20 h-20 object-contain drop-shadow-md rounded-full p-1"}),e.jsxs("div",{className:"text-l font-bold text-white",children:["E-presensi ",e.jsx("br",{}),"Forum Asisten"]}),e.jsx("button",{className:"md:hidden text-white hover:text-gray-200",onClick:()=>a(!1),"aria-label":"Close sidebar",children:e.jsx(A,{className:"h-6 w-6"})})]}),e.jsx("nav",{className:"space-y-2",children:p.map(s=>e.jsxs(w,{to:s.path,className:`flex items-center gap-3 p-3 rounded-lg transition-all ${m.pathname===s.path?"bg-indigo-600 font-medium":"hover:bg-indigo-700"}`,onClick:()=>window.innerWidth<768&&a(!1),children:[s.icon,e.jsx("span",{children:s.name})]},s.path))})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs(w,{to:"/",className:"flex items-center gap-3 p-3 text-white hover:bg-red-700 rounded-lg transition-all",children:[e.jsx(D,{className:"h-5 w-5"}),e.jsx("span",{children:"Logout"})]}),e.jsxs(w,{to:"/profile",className:`flex items-center gap-3 mt-4 p-3 rounded-lg transition-all ${m.pathname==="/profile"?"bg-white/20 font-medium":"bg-white/10 hover:bg-white/20"}`,children:[e.jsxs("div",{className:"w-10 h-10 border-2 border-white rounded-full flex items-center justify-center shadow-md overflow-hidden bg-white",children:[t!=null&&t.photo?e.jsx("img",{src:t.photo,alt:t!=null&&t.nama?`Foto profil ${t.nama}`:"Foto profil",className:"w-full h-full object-cover",onError:s=>{s.target.style.display="none"}}):null,(!(t!=null&&t.photo)||(t==null?void 0:t.photo)&&!document.querySelector(`img[src="${t.photo}"]`))&&e.jsx("div",{className:"w-full h-full flex items-center justify-center text-blue-900 font-bold","aria-label":(t==null?void 0:t.nama)||"Profile",children:((n=(h=t==null?void 0:t.nama)==null?void 0:h[0])==null?void 0:n.toUpperCase())||e.jsx(J,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold",children:t.nama||"User"}),e.jsx("p",{className:"text-xs opacity-80",children:t.nim||"NIM"})]})]})]})]})]})})})}const ie=r=>({"/admin/home":"Dashboard Admin","/admin/data-user":"Manajemen User","/admin/data-dosen":"Manajemen Dosen","/admin/data-prodi":"Manajemen Program Studi","/admin/data-matkul":"Manajemen Mata Kuliah","/admin/data-jadwal":"Manajemen Jadwal","/admin/data-plotingan":"Manajemen Ploting","/admin/data-presensi":"Manajemen Presensi","/admin/data-rekapitulasi":"Rekapitulasi","/admin/profile":"Profil Admin","/home":"Beranda","/mata-kuliah":"Mata Kuliah","/presensi":"Presensi","/rekapitulasi":"Rekapitulasi","/jadwal":"Jadwal","/profile":"Profil Saya"})[r]||"Aplikasi";function oe({toggleSidebar:r}){var p;const[a,t]=i.useState({}),l=F();i.useEffect(()=>{const h=localStorage.getItem("token"),n=localStorage.getItem("user");if(n)try{const s=JSON.parse(n);t({nama:s.nama||"User",nim:s.nim||"NIM",photo:s.photo||null,role:s.role||"asisten"})}catch(s){if(console.error("Error parsing user data:",s),h)try{const c=JSON.parse(atob(h.split(".")[1]));t({nama:c.nama||"User",nim:c.nim||"NIM",photo:c.photo||null,role:c.role||"asisten"})}catch(c){console.error("Error parsing token:",c)}}else if(h)try{const s=JSON.parse(atob(h.split(".")[1]));t({nama:s.nama||"User",nim:s.nim||"NIM",photo:s.photo||null,role:s.role||"asisten"})}catch(s){console.error("Error parsing token:",s)}},[]);const m=a.role==="admin",d=ie(l.pathname);return e.jsx("header",{className:"fixed top-0 left-0 right-0 bg-gradient-to-r from-blue-600 to-indigo-700 shadow-sm z-30 h-16 flex items-center px-4 md:px-6",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:r,className:"p-2 rounded-md text-white hover:bg-gray-100 focus:outline-none","aria-label":"Toggle sidebar",children:e.jsx(R,{className:"h-6 w-6"})}),e.jsx("h1",{className:"text-xl font-semibold text-white md:ml-50",children:d})]}),e.jsx("div",{className:"text-white flex items-center gap-4",children:e.jsxs(w,{to:m?"/admin/home":"/profile",className:"flex items-center gap-2",children:[e.jsxs("div",{className:"w-10 h-10 border-2 border-white rounded-full flex items-center justify-center shadow-md overflow-hidden bg-white",children:[a!=null&&a.photo?e.jsx("img",{src:a.photo,alt:a!=null&&a.nama?`Foto profil ${a.nama}`:"Foto profil",className:"w-full h-full object-cover",onError:h=>{h.target.style.display="none"}}):null,(!(a!=null&&a.photo)||(a==null?void 0:a.photo)&&!document.querySelector(`img[src="${a.photo}"]`))&&e.jsx("div",{className:"w-8 h-8 bg-white text-blue-800 rounded-full flex items-center justify-center font-medium hover:bg-blue-200 transition-colors",children:((p=a.nama)==null?void 0:p[0])||(m?"A":"U")})]}),e.jsx("span",{className:"hidden md:inline text-sm font-medium",children:a.nama||(m?"Admin":"User")})]})})]})})}function ce({children:r}){const[a,t]=i.useState(window.innerWidth>=768),[l,m]=i.useState(null);i.useEffect(()=>{const p=()=>t(window.innerWidth>=768),h=localStorage.getItem("token");if(h)try{const n=JSON.parse(atob(h.split(".")[1]));m(n.role)}catch(n){console.error("Error parsing token:",n)}return window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[]);const d=l==="admin";return e.jsxs("div",{className:"flex min-h-screen min-w-screen bg-gray-50",children:[d?e.jsx(ae,{isOpen:a,setIsOpen:t,className:"fixed md:static z-20"}):e.jsx(ne,{isOpen:a,setIsOpen:t,className:"fixed md:static z-20"}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(oe,{toggleSidebar:()=>t(!a)}),e.jsx("main",{className:"flex-1 p-4 md:p-6 overflow-x-hidden mt-10",children:r})]})]})}export{P as A,ce as L};
